---

# TODO: make this a loop?
prometheusOperator:
  nodeSelector:
    role: "{{ monitoring_namespace }}"
  tolerations:
    - key: "dedicated"
      operator: "Equal"
      value: "{{ monitoring_namespace }}"
      effect: "NoSchedule"

prometheus:
  prometheusSpec:
    nodeSelector:
      role: "{{ monitoring_namespace }}"
    tolerations:
      - key: "dedicated"
        operator: "Equal"
        value: "{{ monitoring_namespace }}"
        effect: "NoSchedule"

alertmanager:
  alertmanagerSpec:
    nodeSelector:
      role: "{{ monitoring_namespace }}"
    tolerations:
      - key: "dedicated"
        operator: "Equal"
        value: "{{ monitoring_namespace }}"
        effect: "NoSchedule"

kube-state-metrics:
  nodeSelector:
    role: "{{ monitoring_namespace }}"
  tolerations:
    - key: "dedicated"
      operator: "Equal"
      value: "{{ monitoring_namespace }}"
      effect: "NoSchedule"

grafana:
  adminUser: "{{ vault_grafana_admin_username }}"
  adminPassword: "{{ vault_grafana_admin_password }}"
  nodeSelector:
    role: "{{ monitoring_namespace }}"
  tolerations:
    - key: "dedicated"
      operator: "Equal"
      value: "{{ monitoring_namespace }}"
      effect: "NoSchedule"
  sidecar:
    dashboards:
      enabled: true
      label: grafana_dashboard
  dashboardProviders:
   dashboardproviders.yaml:
     apiVersion: 1
     providers:
     - name: 'default'
       orgId: 1
       folder: ''
       type: file
       disableDeletion: false
       editable: true
       options:
         path: /var/lib/grafana/dashboards/default
  dashboards:
    default:
      k6-cloud-benchmarking:
        json: |
          {{ lookup('file', role_path + '/files/dashboards/k6-benchmarking.json') | indent(10) }}
